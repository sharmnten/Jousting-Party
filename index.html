<!DOCTYPE html>
<head>
  <script src = "https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser-arcade-physics.min.js"></script>
</head>
<body>
  <script> 
    class Jousting extends Phaser.Scene
    {
        player1;
        player1Velocity;
        player2;
        player2Velocity;
        ground;
        cursors;
        preload ()
        {
            this.load.image('donkey', 'assets/donkeySprite.png');
            this.load.image('ground','assets/ground.jpeg');
            this.load.image('redMonkey','assets/redMonkey.png');
            this.load.image('sky','assets/sky.png');
        }

        create ()
        {
            this.ground = this.physics.add.staticGroup();
            const sky = this.add.image(640,360, 'sky'); 
            for(var i = 0; i < 7; i++){ 
              this.ground.create(i*223, 704, 'ground');
            }
            this.player1 = this.physics.add.sprite(640,360, 'donkey');
            this.player2 = this.physics.add.sprite(640,360, 'redMonkey')

            this.physics.add.collider(this.player1, this.ground);
            this.physics.add.collider(this.player2, this.ground);

            this.cursors = this.input.keyboard.createCursorKeys();

            this.player1Velocity = 160;
            this.player2Velocity = -160;
        }

        update(){
          this.player1.setVelocityX(this.player1Velocity);
          this.player2.setVelocityX(this.player2Velocity);

          if (this.cursors.left.isDown){
            this.player1.setVelocityY(-330);
          }
          
          if (this.cursors.right.isDown){
            this.player2.setVelocityY(-330);
          }

          if(this.player1.x < 10 || this.player1.x > 1270){
            //Make sure this only does one time -> currently activates constantly
            this.player1Velocity = -this.player1Velocity;
          }
          if(this.player2.x < 10 || this.player2.x > 1270){
            this.player2Velocity = -this.player2Velocity;
          }
        }
    }

    const config = {
        type: Phaser.AUTO,
        width: 1280,
        height: 720,
        scene: Jousting,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 300 },
                debug: false
            }
        }
      
    };

    const game = new Phaser.Game(config);
  </script>
</body>
</html>